# 一、CSRF 的核心攻击条件
- 用户已在目标系统登录（会话态有效，如 Cookie 未过期）；
- 攻击者能诱导用户发起跨域请求（如 <img src="https://目标系统.com/transfer">、表单自动提交）；
- 目标系统的接口未校验请求来源（仅依赖 Cookie 认证）。
# 二、核心防护手段：前后端协同方案
## 方案 1：Token 验证（最常用，Vue 项目首选）
原理：后端生成一个随机、一次性、与用户会话绑定的 CSRF Token，前端在请求时携带该 Token，后端校验 Token 有效性（是否与当前会话匹配、是否未过期），校验通过才处理请求。
- 1.后端准备（核心前提）
  - 登录成功后，后端生成 CSRF Token，返回前端
  - 后端接口校验规则：所有非 GET 请求（POST/PUT/DELETE 等，这些请求会修改数据）必须携带 CSRF Token，否则返回 403
- 2.前端存储 Token
- 3.全局请求携带 Token
- 4.Token 刷新与失效处理
## 方案 2：SameSite Cookie（浏览器层面防护，低成本补充）
通过设置 Cookie 的 SameSite 属性，限制 Cookie 仅在「同源请求」中携带，跨域请求（如恶意网站发起的请求）不会携带目标系统的 Cookie，从而阻止 CSRF。
## 方案 3：Origin/Referer 校验（后端辅助，前端无需额外操作）
后端通过校验请求头中的 Origin 或 Referer 字段，判断请求是否来自「信任的同源域名」，非信任域名的请求直接拒绝。

