Chrome DevTools 的 Coverage（覆盖率）面板 用于分析页面加载和交互过程中，JavaScript 和 CSS 代码的执行 / 使用情况，帮助开发者识别未被使用的 “死代码”，从而精简资源体积、提升加载性能。

## 如何打开 Coverage 面板？
打开 Chrome 浏览器，访问目标页面。
按 F12 或 Ctrl+Shift+I（Mac 为 Cmd+Opt+I）打开 DevTools。
点击顶部菜单栏的 More Tools（更多工具），选择 Coverage；或直接按 Ctrl+Shift+P（Mac 为 Cmd+Shift+P），输入 Show Coverage 并回车。

## 核心功能与界面说明
Coverage 面板主要由以下部分组成：
-  录制按钮（圆形按钮）：点击开始 / 停止记录代码使用情况。
- 文件列表：显示所有加载的 JS 和 CSS 文件，包含 3 个关键指标：
- 覆盖率百分比：已使用代码占总代码的比例（越高越好）。
- 未使用字节数：灰色进度条，长度代表未使用代码的体积。
- 总字节数：文件总大小。
- 代码预览区：选中文件后，右侧显示代码内容，其中：
- 绿色：已执行 / 使用的代码。
- 红色：未执行 / 未使用的代码（死代码）

## 使用场景与价值
### 识别未使用的 JS/CSS 代码
- 问题：项目中可能存在冗余代码（如未调用的函数、废弃的样式、第三方库中未使用的模块），增加资源体积和加载时间。
- 操作：
点击录制按钮，刷新页面（记录首屏加载时的代码使用情况）。
与页面交互（如点击按钮、滚动、切换路由），记录交互过程中的代码使用情况。
停止录制，查看文件列表中覆盖率低的文件（如 <50%），重点分析红色未使用代码。
### 优化第三方库体积
- 问题：引入的第三方库（如 Lodash、Chart.js）通常包含大量未使用的功能（如仅用 lodash.get 却引入完整库）。
- 操作：录制后查看第三方库文件的覆盖率，若大量代码未使用，可：
替换为轻量替代库（如用 lodash-es 配合 Tree-Shaking，或用 date-fns 替代 moment.js）。
按需引入（如 import get from 'lodash/get' 而非 import _ from 'lodash'）。
### 精简 CSS 样式
- 问题：CSS 中可能存在未被任何元素使用的选择器（如废弃的类名、冗余的后代选择器）。
- 操作：录制后查看 CSS 文件的红色代码，删除未使用的选择器。配合 purgecss 等工具可自动移除未使用 CSS（如 Tailwind 项目常用）。

### 验证 Tree-Shaking 效果
- 问题：Webpack 等构建工具的 Tree-Shaking 功能可能因配置不当（如未设 mode: 'production'）导致未生效，死代码未被移除。
- 操作：对比构建前后的代码覆盖率，若生产环境仍有大量未使用代码，检查构建配置（如 usedExports: true、minimize: true 等）。

# 注意事项
- 录制范围影响结果：
仅录制首屏加载，可能漏掉 “交互时才执行的代码”（如点击按钮触发的函数），导致误判为死代码。
建议完整操作页面所有功能后再停止录制，确保覆盖所有场景。
- 动态生成的代码可能被误判：
若代码通过 eval 或动态 import 生成，Coverage 可能无法追踪，导致显示为未使用（需结合实际逻辑判断）。
- CSS 覆盖率的局限性：
仅检测 “是否有元素匹配选择器”，不考虑 “选择器是否在当前视图中生效”（如隐藏元素的样式仍会被标记为使用）。
- 不要盲目删除 “红色代码”：
红色代码可能是 “当前场景未触发但必要的代码”（如错误处理、未执行的分支逻辑），需结合业务逻辑判断是否删除。
## 与其他工具的配合
- webpack-bundle-analyzer：结合 Coverage 分析，先通过 Coverage 找到低覆盖率文件，再用 bundle-analyzer 查看该文件的具体组成（如第三方库占比）。
- Lighthouse：Lighthouse 的 “未使用的 JavaScript”“未使用的 CSS” 检测依赖类似原理，可作为批量扫描的补充。
- PurgeCSS：根据 Coverage 结果确认需保留的代码后，用 PurgeCSS 自动移除未使用 CSS（适合构建流程集成）。