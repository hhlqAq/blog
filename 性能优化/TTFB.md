# TTFB（Time To First Byte）
50ms 是一个比较好的指标，一般来说，TTFB 小于 50ms 都是比较好的。
如果超过500ms，一般用户就会明显的白屏。

TTFB 是 “网络 + 服务器” 层面的指标，不涉及页面渲染；

## TTFB是什么
TTFB 精确反映了 “请求从客户端发出到服务器返回首个字节” 的全链路耗时，涵盖三个核心阶段：
- 网络传输耗时：请求从浏览器发送到服务器的时间（上行链路）；
- 服务器处理耗时：服务器接收请求后，进行业务逻辑处理、数据库查询、资源读取等操作的时间；
- 响应首字节传输耗时：服务器生成响应后，将第一个字节数据传回浏览器的时间（下行链路）。

## 优化TTFB
### 优化服务器处理效率（核心瓶颈）
- 减少服务器计算开销
  - 优化业务逻辑
  - 缓存热点数据
  - 优化数据库性能
- 提升服务器硬件与部署架构
  - 升级服务器配置
  - 采用负载均衡策略
  - 边缘计算 / CDN 动态加速
### 优化网络传输效率（减少链路延迟）
- 缩短网络链路
  - **静态资源** CDN 加速
  - **动态内容**边缘节点处理
- 优化网络协议与连接
  - 启用 HTTP/2 或 HTTP/3
  - 复用 TCP 连接，启用 Keep-Alive（HTTP/1.1 默认启用），避免每次请求重新建立连接，配置合理的超时时间（如 60s）
  - DNS 预解析与连接预建立
    - 在 HTML 头部添加 DNS 预解析，提前解析域名：
    - 对关键域名使用 preconnect 提前建立连接（包含 DNS 解析、TCP 握手、TLS 握手）：
  - 减少中间节点转发
    - 优化路由路径
    - 避免不必要的代理
- 优化请求效率（减少请求阻塞与冗余）
  - 请求本身的特性（如优先级、体积、时机）会影响 TTFB 的启动时机和处理顺序
  - 提升请求优先级