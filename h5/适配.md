移动端适配需兼顾不同设备尺寸（手机、平板）、系统（Android/iOS）和浏览器内核，追求 “兼容性好” 的方案需满足：低版本系统支持、主流浏览器兼容、实现简单且易维护
# 一、基础适配：视口（Viewport）配置
所有方案的前提，必须优先配置，否则后续适配会错乱。
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
```
- 作用：
  - width=device-width：使页面宽度等于设备屏幕宽度（避免默认缩放）。
  - user-scalable=no：禁止用户缩放（防止布局错乱，尤其适合交互密集型页面）。
  - max/min-scale=1.0：限制用户缩放范围，避免页面过大或过小。
- 兼容性：支持所有现代浏览器及 iOS 8+、Android 4.4+，是移动端适配的基础。
# 二、弹性布局（Flexbox）：组件 / 局部布局
兼容性极佳（iOS 7+、Android 4.4+ 完全支持基础属性），适合处理组件内部的自适应排列，是移动端布局的核心方案。

基本示例，书写时不必考虑前缀 `-webkit-`、`-ms-`，直接写 `flex` 即可。

```css
/* 父容器 */
.container {
  display: -webkit-box; /* 兼容旧版webkit内核（Android 4.3-） */
  display: -ms-flexbox; /* 兼容IE 10 */
  display: flex;
}

/* 子元素占比分配（如三栏布局） */
.item {
  -webkit-box-flex: 1; /* 旧版语法 */
  -ms-flex: 1; /* IE 10 */
  flex: 1;
}

/* 水平居中 */
.container {
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  justify-content: center;
}

/* 垂直居中 */
.container {
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
}
```
- 应用场景：
  - 导航栏（左侧返回、中间标题、右侧菜单）。
  - 列表项（头像 + 文字 + 箭头的水平排列）。
  - 卡片内部元素的自适应分布（如价格 + 按钮的右对齐）。
  - 流式布局（如商品网格，自动换行需配合 flex-wrap，低版本不支持时可降级为固定布局）。

- 兼容性处理：
  - 对 Android 4.3 及以下，用旧版语法 -webkit-box 替代 flex（不支持 flex-wrap、flex-direction: column-reverse 等高级属性，需避免使用）。
  - 无需额外工具，纯 CSS 实现，维护成本低。
# 三、REM 适配：整体尺寸等比缩放
通过动态调整根元素字体大小，实现页面元素尺寸随屏幕宽度等比变化，兼容 iOS 6+、Android 4.0+，是全页面等比适配的首选。
## 实现步骤：
- 设定设计稿基准：以常见的 750px 设计稿为例，约定 1rem = 100px（计算方便：设计稿中 20px → 0.2rem）。
- 动态计算根字体大小：在 `<head>` 中插入 JS（优先执行，避免闪烁），根据屏幕宽度计算 html 的 font-size：
```js
(function(doc, win) {
  var docEl = doc.documentElement,
    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
    recalc = function() {
      var clientWidth = docEl.clientWidth;
      if (!clientWidth) return;
      docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
    };
  if (!doc.addEventListener) return;
  win.addEventListener(resizeEvt, recalc, false);
  doc.addEventListener('DOMContentLoaded', recalc, false);
})(document, window);
```
开发时单位转换：postcss-pxtorem 插件。
```js
import postcssPxToRem from 'postcss-pxtorem';

export default {
  css: {
    postcss: {
      plugins: [
        postcssPxToRem({
          rootValue: 100, // 根元素字体大小（1rem = 100px，方便计算）
          propList: ['*'], // 需要转换的属性（* 表示所有）
          unitPrecision: 5, // 转换后保留的小数位数
          selectorBlackList: ['ignore-'], // 类名前缀为 ignore- 的元素不转换
          replace: true, // 直接替换 px 为 rem，不保留原 px
          mediaQuery: false, // 不转换媒体查询中的 px
          minPixelValue: 2, // 小于 2px 的值不转换
          exclude: /node_modules/i // 排除 node_modules 目录
        })
      ]
    }
  }
};
```
## 避坑点
- 忽略不需要转换的 px：
  - 直接写大写 PX 或 Px 可跳过转换（如 width: 100PX 不转换）。
  - 通过 selectorBlackList 排除特定类名（如 ignore-px 类下的 px 不转换）。
- 适配 PC 与移动端：
  - 限制根字体最大 / 最小值（如 PC 端最大 font-size: 200px，避免 rem 过大）。
  - 媒体查询中用 px 固定布局（如 @media (min-width: 1200px) { ... }）。
- 第三方 UI 库兼容：
  - 若第三方组件（如 Element UI）用 px 布局，需通过 exclude 排除其样式，或单独适配。
# 四、响应式补充（Media Query）：特殊场景适配
用于处理不同尺寸设备的布局差异（如小屏隐藏元素、大屏展示更多内容），兼容 iOS 7+、Android 4.4+，作为 Flexbox + REM 的补充。

常用断点：

```css
/* 小屏手机（如iPhone SE） */
@media (max-width: 320px) {
  .title { font-size: 0.24rem; } /* 比默认小一点 */
}

/* 大屏手机（如iPhone 13 Pro Max） */
@media (min-width: 414px) {
  .card { padding: 0.3rem; } /* 增加内边距 */
}

/* 平板设备 */
@media (min-width: 768px) {
  .layout { display: -webkit-box; display: flex; } /* 横屏布局 */
}
```
- 应用场景：
  - 不同屏幕下的字体大小微调（如小屏显示更详细的辅助文本）。
  - 小屏幕隐藏次要内容（如辅助文本）。
  - 平板设备的多列布局（移动端为单列）。
# 五、图片适配：避免拉伸 / 模糊
## 使用相对单位定义图片尺寸：
```css
.img {
  width: 100%; /* 宽度自适应父容器 */
  height: auto; /* 高度自动，保持比例 */
  max-width: 100%; /* 限制最大宽度 */
}
```
## 高清图适配（Retina 屏）：
 srcset 提供不同分辨率图片，浏览器自动选择：
 兼容性：iOS 8+、Android 4.4+ 支持 srcset，低版本自动降级为 src。
```css
<img 
  src="image-320w.jpg" 
  srcset="image-320w.jpg 320w, image-640w.jpg 640w" 
  sizes="(max-width: 320px) 320px, 640px"
>
```
## 背景图适配：
```css
.bg {
  background-image: url('bg.png');
  background-size: cover; /* 覆盖容器，可能裁剪 */
  background-position: center; /* 居中显示 */
}
```
# 六、兼容性兜底：处理极端情况
## 低版本浏览器样式重置：
使用 Normalize.css 替代 reset.css，保留有用的默认样式（如表单元素），减少兼容性问题。
## CSS 前缀自动补充：
用 Autoprefixer 工具（配合 Webpack、PostCSS）自动添加 -webkit- 等前缀，无需手动编写
## 避免使用高版本 API：
- 不依赖 CSS Grid（Android 4.4 不支持）。
- 不使用 vw/vh（iOS 8- 不支持）。
- 动画用 transform + transition（比 animation 兼容性更好）。
# 方案总结（优先级排序）
- 必选基础：Viewport 配置 + Flexbox 布局（处理 80% 的布局需求，兼容性无死角）。
- 核心适配：REM 动态计算（实现整体尺寸等比缩放，兼容绝大多数设备）。
- 补充优化：Media Query 响应式调整（处理特殊尺寸场景）+ 图片适配（避免拉伸模糊）。
- 兜底保障：Autoprefixer + Normalize.css（减少低版本兼容问题）。